

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Getting KUnit &mdash; KUnit  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Frequently Asked Questions" href="faq.html" />
    <link rel="prev" title="Using KUnit" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> KUnit
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Using KUnit</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Getting KUnit</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#why-are-there-multiple-versions">Why are there multiple versions?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#but-wait-i-see-more-than-two-branches">But wait, I see more than two branches!</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#which-version-should-i-use">Which version should I use?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#what-features-are-available-upstream">What features are available upstream?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#what-features-are-not-upstream-yet">What features are not upstream yet?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#where-are-these-versions">Where are these versions?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#upstream">Upstream</a></li>
<li class="toctree-l4"><a class="reference internal" href="#experimental">Experimental</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#running-tests">Running tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#writing-tests">Writing tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#submitting-tests-upstream">Submitting tests upstream</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../third_party/kernel/index.html">Upstream Version</a></li>
<li class="toctree-l1"><a class="reference internal" href="../third_party/stable_kernel/index.html">Stable Version (aka Not Upstream)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../press.html">Press</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">KUnit</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Using KUnit</a> &raquo;</li>
        
      <li>Getting KUnit</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/usage/getting_kunit.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="getting-kunit">
<h1>Getting KUnit<a class="headerlink" href="#getting-kunit" title="Permalink to this headline">¶</a></h1>
<p>In order to use KUnit, you must first determine which branch you would like to
use. What do we mean by that? We are in the process of upstreaming KUnit into
the Linux kernel, so that means we have code under development that is not in
the upstream repository or otherwise doesn’t match what is currently upstream.</p>
<p>For more information on why there are multiple versions of KUnit, see
<a class="reference internal" href="#why-multiple-versions"><span class="std std-ref">Why are there multiple versions?</span></a>.</p>
<p>For information on deciding which version you should use see
<a class="reference internal" href="#which-version"><span class="std std-ref">Which version should I use?</span></a>.</p>
<p>For the actual URL you need, see
<a class="reference internal" href="#download-links"><span class="std std-ref">Where are these versions?</span></a></p>
<div class="section" id="why-are-there-multiple-versions">
<span id="why-multiple-versions"></span><h2>Why are there multiple versions?<a class="headerlink" href="#why-are-there-multiple-versions" title="Permalink to this headline">¶</a></h2>
<p>Ideally, upstreaming code to the Linux kernel would be fast, we would be able to
develop features entirely on LKML, no one would use code that had not yet been
accepted upstream, and everything would have been done this way from the start.
Unfortunately, we do not live in a perfect world, and consequently none of these
are true.</p>
<p>This means that there are some features that we’ve developed which aren’t yet
going upstream. We’ve developed these in an <em>experimental</em> branch. This is
basically a staging branch for features we’re still actively experimenting with,
or which depend on code which isn’t yet upstream.</p>
<div class="section" id="but-wait-i-see-more-than-two-branches">
<h3>But wait, I see more than two branches!<a class="headerlink" href="#but-wait-i-see-more-than-two-branches" title="Permalink to this headline">¶</a></h3>
<p>For the upstream version, just use torvalds/master. Our <em>experimental</em> branch is
hosted at <a class="reference external" href="https://kunit.googlesource.com/linux/+/kunit/alpha/master">https://kunit.googlesource.com/linux/+/kunit/alpha/master</a>.</p>
<p>We will be periodically replacing the <em>experimental</em> branch with one based on
newer upstream kernels, in order to minimise the divergence between
<em>experimental</em> and upstream. For more details on how this will work, see:
<a class="reference external" href="https://lore.kernel.org/linux-kselftest/20190924000503.GA97201&#64;google.com/T/#e73eab088e4791c234bf13156cc276ad15c8376de">https://lore.kernel.org/linux-kselftest/20190924000503.GA97201&#64;google.com/T/#e73eab088e4791c234bf13156cc276ad15c8376de</a></p>
</div>
</div>
<div class="section" id="which-version-should-i-use">
<span id="which-version"></span><h2>Which version should I use?<a class="headerlink" href="#which-version-should-i-use" title="Permalink to this headline">¶</a></h2>
<p>As for which branch you should use, upstream should be generally preferred (just
as upstreaming your own code should be generally preferred); nevertheless, there
are a lot of features that are not upstream yet, and will not be upstream for
some time (possibly more than a year), if you need these features for your tests
then you have no choice other than to use the <em>experimental</em> branch.</p>
<div class="section" id="what-features-are-available-upstream">
<h3>What features are available upstream?<a class="headerlink" href="#what-features-are-available-upstream" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Basic test structure for defining test cases and test suites</p></li>
<li><p>Basic expectations and assertions</p></li>
<li><p>KUnit managed resources</p></li>
<li><p>Error reporting</p></li>
</ul>
</div>
<div class="section" id="what-features-are-not-upstream-yet">
<h3>What features are not upstream yet?<a class="headerlink" href="#what-features-are-not-upstream-yet" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Class mocking</p></li>
<li><p>Function mocking</p></li>
<li><p>Hardware/platform faking</p></li>
<li><p>Error recovery</p></li>
</ul>
</div>
</div>
<div class="section" id="where-are-these-versions">
<span id="download-links"></span><h2>Where are these versions?<a class="headerlink" href="#where-are-these-versions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="upstream">
<h3>Upstream<a class="headerlink" href="#upstream" title="Permalink to this headline">¶</a></h3>
<p>KUnit can be found in Linux 5.5 and newer.</p>
<ul class="simple">
<li><p>Code: <a class="reference external" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/">https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/</a></p></li>
<li><p><a class="reference external" href="../third_party/kernel/docs/usage.html">Usage</a> - for a more detailed explanation of KUnit features</p></li>
<li><p><a class="reference external" href="../third_party/kernel/docs/api">API</a> - for the list of KUnit APIs used for testing</p></li>
<li><p>kunitconfig file: <a class="reference external" href="https://kunit.googlesource.com/kunitconfig/+/refs/heads/master/kunitconfig">https://kunit.googlesource.com/kunitconfig/+/refs/heads/master/kunitconfig</a></p></li>
</ul>
<p>The KUnit code itself is primarily found in the <a class="reference external" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/lib/kunit">lib/kunit</a>
directory.</p>
</div>
<div class="section" id="experimental">
<h3>Experimental<a class="headerlink" href="#experimental" title="Permalink to this headline">¶</a></h3>
<p>The <em>experimental</em> branch is stored in a Google-hosted gerrit instance. Going
forward, there will be a set of versioned <em>experimental</em> branches, of which only
the latest will be actively supported. Until this is available, however, there
is a historic <em>kunit/alpha/master</em> branch containing our experimental code.</p>
<ul class="simple">
<li><p>Code: <a class="reference external" href="https://kunit.googlesource.com/linux/+/kunit/alpha/master">https://kunit.googlesource.com/linux/+/kunit/alpha/master</a>.</p></li>
<li><p><a class="reference external" href="../third_party/stable_kernel/docs/usage.html">Usage</a> - for a more detailed explanation of KUnit features</p></li>
<li><p><a class="reference external" href="../third_party/stable_kernel/docs/api">API</a> - for the list of KUnit APIs used for testing</p></li>
<li><p>kunitconfig file: <a class="reference external" href="https://kunit.googlesource.com/kunitconfig/+/refs/heads/kunit/alpha/master/kunitconfig">https://kunit.googlesource.com/kunitconfig/+/refs/heads/kunit/alpha/master/kunitconfig</a></p></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="faq.html" class="btn btn-neutral float-right" title="Frequently Asked Questions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="Using KUnit" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2019 Google LLC.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>